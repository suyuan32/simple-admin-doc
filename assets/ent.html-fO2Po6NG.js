import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,c as r,d as s,e as o,f as a,b as e,o as p}from"./app-DbrLFopa.js";const k={},t=s("h2",{id:"ent",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ent"},[s("span",null,"Ent")])],-1),c={class:"hint-container info"},d=s("p",{class:"hint-container-title"},"Info",-1),B=s("p",null,[s("a",{href:"https://entgo.io/docs/getting-started",target:"_blank",rel:"noopener noreferrer"},"Official Doc"),a(),s("a",{href:"https://github.com/ent/ent/blob/master/examples/README.md",target:"_blank",rel:"noopener noreferrer"},"Official Example"),s("a",{href:"https://github.com/suyuan32/simple-admin-example-ent",target:"_blank",rel:"noopener noreferrer"},"Tutorial Project"),a(" helps you to imporve the skills")],-1),h=e(`<h2 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start"><span>Quick Start</span></a></h2><h3 id="install-ent" tabindex="-1"><a class="header-anchor" href="#install-ent"><span>Install Ent</span></a></h3><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">go</span><span style="color:#032F62;--shiki-dark:#98C379;"> get</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="color:#032F62;--shiki-dark:#98C379;"> entgo.io/ent/cmd/ent</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="initialize-code" tabindex="-1"><a class="header-anchor" href="#initialize-code"><span>Initialize code</span></a></h3><p>Run in rpc directory</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"># Creat User schema</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">go</span><span style="color:#032F62;--shiki-dark:#98C379;"> run</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> -mod=mod</span><span style="color:#032F62;--shiki-dark:#98C379;"> entgo.io/ent/cmd/ent</span><span style="color:#032F62;--shiki-dark:#98C379;"> init</span><span style="color:#032F62;--shiki-dark:#98C379;"> User</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"># Generate code，use template ， simple admin core add Page template to make it easier to do pagination</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">go</span><span style="color:#032F62;--shiki-dark:#98C379;"> run</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> -mod=mod</span><span style="color:#032F62;--shiki-dark:#98C379;"> entgo.io/ent/cmd/ent</span><span style="color:#032F62;--shiki-dark:#98C379;"> generate</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> --template</span><span style="color:#032F62;--shiki-dark:#98C379;"> glob=&quot;./ent/template/*.tmpl&quot;</span><span style="color:#032F62;--shiki-dark:#98C379;"> ./ent/schema</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="defined-schema" tabindex="-1"><a class="header-anchor" href="#defined-schema"><span>Defined schema</span></a></h3><p>In rpc/ent ，you mainly modify files in schema directory. It is used to define all the models，most of other files in other directories are generated. Mixin is used to define common fields, such as</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">package</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> schema</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">import</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent/dialect/entsql</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent/schema</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent/schema/edge</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent/schema/field</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/ent/schema/mixins</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">type</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> Role</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> struct</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Schema</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Role</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Fields</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;"> return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;name&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;role name | 角色名&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;value&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Unique</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;role value for permission control in front end | 角色值，用于前端权限控制&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;default_router&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Default</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;dashboard&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;default menu : dashboard | 默认登录页面&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;remark&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Default</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;remark | 备注&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Uint32</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;order_no&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Default</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">0</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;order number | 排序编号&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Role</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Mixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Mixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;"> return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Mixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">  // common field</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;">  mixins</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">BaseMixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{},</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;">  mixins</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">StatusMixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{},</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Role</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Edges</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Edge</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;"> return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Edge</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">  // 声明关系, ent 的关系用 edge 表示</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  edge</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">To</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;menus&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">Menu</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Type</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Role</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Annotations</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">schema</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Annotation</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;"> return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">schema</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Annotation</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;">  entsql</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Annotation</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span><span style="color:#24292E;--shiki-dark:#E06C75;">Table</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;sys_roles&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mixin-introduction" tabindex="-1"><a class="header-anchor" href="#mixin-introduction"><span>Mixin Introduction</span></a></h3><p>Currently, the project provides several Mixins located in <code>&quot;github.com/suyuan32/simple-admin-common/orm/ent/mixins&quot;</code></p><ul><li>id: Provide self-incrementing integer <code>id</code>, <code>created_at</code>, <code>updated_at</code></li><li>uuid: Provide <code>UUID</code> type <code>id</code> as primary key, <code>created_at</code>, <code>updated_at</code></li><li>status: Provide <code>status</code> field</li><li>sort: Provide <code>sort</code> field</li></ul><h4 id="uuidx-provides-two-methods-for-converting-uuid" tabindex="-1"><a class="header-anchor" href="#uuidx-provides-two-methods-for-converting-uuid"><span>uuidx provides two methods for converting uuid</span></a></h4><ul><li>uuidx.ParseUUIDSlice is used to convert the string array of uuid into the uuid array type of ent</li><li>uuidx.ParseUUIDString is used to convert uuid string to uuid type</li></ul><blockquote><p>Soft delete can visit <a href="https://entgo.io/docs/interceptors/#soft-delete" target="_blank" rel="noopener noreferrer">Soft Delete</a></p></blockquote><h3 id="initialize" tabindex="-1"><a class="header-anchor" href="#initialize"><span>Initialize</span></a></h3><p>See rpc/internal/svc/service_context.go</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">package</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> svc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">import</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/ent</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/internal/config</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/zeromicro/go-zero/core/logx</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/zeromicro/go-zero/core/stores/redis</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">type</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> ServiceContext</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> struct</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;"> Config</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> config</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Config</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;"> DB</span><span style="color:#D73A49;--shiki-dark:#C678DD;">     *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Client</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;"> Redis</span><span style="color:#D73A49;--shiki-dark:#C678DD;">  *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">redis</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Redis</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> NewServiceContext</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">c</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> config</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Config</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ServiceContext</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;"> db</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewClient</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Log</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">), </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// logger</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Driver</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">c</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DatabaseConf</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">GetCacheDriver</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">c</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">RedisConf</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Debug</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// debug mode</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;"> )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // initialize redis</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;"> rds</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> c</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">RedisConf</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewRedis</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="color:#24292E;--shiki-dark:#E06C75;">rds</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Ping</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Initialize redis failed&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">  return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;"> logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Initialize redis connection successfully&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;"> return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> &amp;</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ServiceContext</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  Config</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">c</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:     </span><span style="color:#24292E;--shiki-dark:#E06C75;">db</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  Redis</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:  </span><span style="color:#24292E;--shiki-dark:#E06C75;">rds</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ent-driver" tabindex="-1"><a class="header-anchor" href="#ent-driver"><span>Ent Driver</span></a></h3><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>There are two drivers for ent，cache and no cache.</p></div><blockquote><p>Cache （Use Context control the cache）</p></blockquote><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Due to a bug in entcache, we temporarily deleted the cache driver and used cache templates instead.</p></div><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">db</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewClient</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Log</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">), </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// logger</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Driver</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">c</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DatabaseConf</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewCacheDriver</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">c</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">RedisConf</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Debug</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// debug mode</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">Info</p><p>Controlling the cache is very simple. By default, the cache is enabled. There are several ways to control the cache:</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// For any request, the cache is controlled by l.ctx, the following is the default cache enabled</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">result</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// The following is to skip the cache</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">result</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">entcache</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Skip</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">), </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// The following is to skip and delete the cache. Unlike skip, skip just skips the cache in a single line. In fact, the cache is still there, and other statements can still get his cache</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">result</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">entcache</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Evict</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">), </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><blockquote><p>No cache (Changes will show immediately)</p></blockquote><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">db</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewClient</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Log</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">), </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// logger</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Driver</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">c</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DatabaseConf</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewNoCacheDriver</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Debug</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// debug mode</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">Info</p><p><a href="https://github.com/ariga/entcache" target="_blank" rel="noopener noreferrer">Ent cache Document</a></p></div><h3 id="usage-in-logic" tabindex="-1"><a class="header-anchor" href="#usage-in-logic"><span>Usage in logic</span></a></h3><p>Create an API <code>rpc/internal/logic/update_role_status_logic.go</code></p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">package</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> api</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">import</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">context</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/internal/svc</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/internal/utils/errorhandler</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/types/core</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/zeromicro/go-zero/core/logx</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-common/i18n</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">type</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> CreateApiLogic</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> struct</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	ctx</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">    context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Context</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	svcCtx</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">svc</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ServiceContext</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;">	logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Logger</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> NewCreateApiLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">ctx</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">svcCtx</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">svc</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ServiceContext</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">CreateApiLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> &amp;</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">CreateApiLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:    </span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		Logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">WithContext</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">l </span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">CreateApiLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">CreateApi</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">in</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ApiInfo</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">BaseIDResp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#C678DD;">error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	result</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Create</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetPath</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Path</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetDescription</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Description</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetAPIGroup</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ApiGroup</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetMethod</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Method</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		Save</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> err</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">errorhandler</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">DefaultEntError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> &amp;</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">BaseIDResp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">result</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">Msg</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">i18n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">CreateSuccess</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">}, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">nil</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="query-data" tabindex="-1"><a class="header-anchor" href="#query-data"><span>Query data</span></a></h3><p>See <a href="http://ent.ryansu.tech/#/zh-cn/predicates" target="_blank" rel="noopener noreferrer">Predicates</a></p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">package</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> api</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">import</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">context</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/ent/predicate</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/ent/api</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/internal/svc</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/internal/utils/errorhandler</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-core/rpc/types/core</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/zeromicro/go-zero/core/logx</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">type</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> GetApiListLogic</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> struct</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	ctx</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">    context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Context</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	svcCtx</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">svc</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ServiceContext</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;">	logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Logger</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> NewGetApiListLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">ctx</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">svcCtx</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">svc</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ServiceContext</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">GetApiListLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> &amp;</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">GetApiListLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:    </span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		Logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">WithContext</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">l </span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">GetApiListLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">GetApiList</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">in</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ApiListReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ApiListResp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#C678DD;">error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	var</span><span style="color:#24292E;--shiki-dark:#E06C75;"> predicates</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">predicate</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">API</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Path</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		predicates</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> append</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">predicates</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">api</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">PathContains</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Path</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Description</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		predicates</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> append</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">predicates</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">api</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">DescriptionContains</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Description</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ApiGroup</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		predicates</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> append</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">predicates</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">api</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">APIGroupContains</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ApiGroup</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Method</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		predicates</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> append</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">predicates</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">api</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Method</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Method</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	result</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Query</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Where</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">predicates</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">...</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Page</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Page</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">PageSize</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> err</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">errorhandler</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">DefaultEntError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	resp</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> &amp;</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ApiListResp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	resp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Total</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> result</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">PageDetails</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Total</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	for</span><span style="color:#24292E;--shiki-dark:#E06C75;"> _</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">v</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> range</span><span style="color:#24292E;--shiki-dark:#E06C75;"> result</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">List</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		resp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Data</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> append</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">resp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Data</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#C678DD;">&amp;</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ApiInfo</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:          </span><span style="color:#24292E;--shiki-dark:#E06C75;">v</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			CreatedAt</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:   </span><span style="color:#24292E;--shiki-dark:#E06C75;">v</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">CreatedAt</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UnixMilli</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			Path</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:        </span><span style="color:#24292E;--shiki-dark:#E06C75;">v</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Path</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			Description</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">v</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Description</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			ApiGroup</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:    </span><span style="color:#24292E;--shiki-dark:#E06C75;">v</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">APIGroup</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			Method</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:      </span><span style="color:#24292E;--shiki-dark:#E06C75;">v</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Method</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">		})</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> resp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">nil</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="query-raw-sql" tabindex="-1"><a class="header-anchor" href="#query-raw-sql"><span>Query raw sql</span></a></h3><p>If you want to execute raw sql ，you need to modify makefile ， add flag --feature sql/execquery</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">go</span><span style="color:#032F62;--shiki-dark:#98C379;"> run</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> -mod=mod</span><span style="color:#032F62;--shiki-dark:#98C379;"> entgo.io/ent/cmd/ent</span><span style="color:#032F62;--shiki-dark:#98C379;"> generate</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> --template</span><span style="color:#032F62;--shiki-dark:#98C379;"> glob=&quot;./rpc/ent/template/*.tmpl&quot;</span><span style="color:#032F62;--shiki-dark:#98C379;"> ./rpc/ent/schema</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> --feature</span><span style="color:#032F62;--shiki-dark:#98C379;"> sql/execquery</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>and then you can use client.QueryContext to execute raw sql</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">students</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> client</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">QueryContext</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Background</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;select * from student&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="project-add-pagination-template-by-default-you-can-copy-this-template-to-other-project" tabindex="-1"><a class="header-anchor" href="#project-add-pagination-template-by-default-you-can-copy-this-template-to-other-project"><span>Project add pagination template by default, you can copy this template to other project</span></a></h3><p>In ent/template/pagination.tmpl，add flag --template glob=&quot;./rpc/ent/template/*.tmpl&quot; when generating code and then you can use pagination like below:</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">apis</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Query</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Where</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">predicates</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">...</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Page</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Page</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">PageSize</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>Note： Order operation needs to be set in Page function, we support Filter for query at the same time</p></blockquote><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">apis</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Query</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Where</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">predicates</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">...</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Page</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Page</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">PageSize</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">pager</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">APIPager</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    pager</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Order</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Asc</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">api</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">FieldID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    pager</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Filter</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">query</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">APIQuery</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">APIQuery</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#C678DD;">error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> query</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">nil</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>By default, we order by ID, you do not need to set it.</p><blockquote><p>Set Not Nil template</p></blockquote><p>Used to partially update data, for example:</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">l </span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">UpdateDepartmentLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UpdateDepartment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">in</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">DepartmentInfo</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">BaseResp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#C678DD;">error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Department</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UpdateOneID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilStatus</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">uint8</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Status</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilSort</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Sort</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilAncestors</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Ancestors</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilLeader</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Leader</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilPhone</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Phone</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilEmail</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Email</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilRemark</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Remark</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		SetNotNilParentID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ParentId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">		Exec</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> err</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		switch</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		case</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">IsNotFound</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Errorw</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="color:#24292E;--shiki-dark:#E06C75;">logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;detail&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">			return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">statuserr</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewInvalidArgumentError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">i18n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">TargetNotFound</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		case</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">IsConstraintError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Errorw</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="color:#24292E;--shiki-dark:#E06C75;">logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;detail&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">			return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">statuserr</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewInvalidArgumentError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">i18n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">UpdateFailed</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		default</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Errorw</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">logmsg</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DatabaseError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">logx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;detail&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()))</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">			return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">statuserr</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">NewInternalError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">i18n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DatabaseError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> &amp;</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">BaseResp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span><span style="color:#24292E;--shiki-dark:#E06C75;">Msg</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">i18n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">UpdateSuccess</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">}, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">nil</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>SetNotNil function is used to update data only when pointer is not nil.</p></div><h3 id="common-functions-used-in-query" tabindex="-1"><a class="header-anchor" href="#common-functions-used-in-query"><span>Common functions used in query</span></a></h3><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// .ExecX() execute query，don&#39;t return anything</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">client</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Student</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UpdateOneID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Jack&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">ExecX</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Background</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// .Exec() execute query and return error</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> client</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Student</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UpdateOneID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Jack&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Exec</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Background</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// .Save() execute query and  return error and student data</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">s</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> client</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Student</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Create</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Jack&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetAddress</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Road&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetAge</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">10</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Save</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Background</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// .SaveX() execute query and  return student data without error</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">s</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> client</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Student</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Create</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Jack&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetAddress</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Road&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetAge</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">10</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SaveX</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">context</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Background</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">())</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>cache template</p></blockquote><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">User</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Query</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">GetCache</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Redis</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">user</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">IDEQ</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#24292E;--shiki-dark:#E06C75;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">), </span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#24292E;--shiki-dark:#E06C75;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> string</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">3</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#24292E;--shiki-dark:#E06C75;"> time</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Second</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="transaction" tabindex="-1"><a class="header-anchor" href="#transaction"><span>Transaction</span></a></h3><p>The project provides the WithTx method to use database transactions locally, taking updating user information as an example：</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">l </span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">UpdateUserLogic</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UpdateUser</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">in</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">UserInfo</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">*</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">BaseResp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#C678DD;">error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">	err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> entx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">WithTx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">svcCtx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DB</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">tx</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Tx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		updateQuery</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> tx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">User</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UpdateOneID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">uuidx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">ParseUUIDString</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			SetNotNilUsername</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Username</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			SetNotNilNickname</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Nickname</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			SetNotNilEmail</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Email</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			SetNotNilMobile</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Mobile</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			SetNotNilAvatar</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Avatar</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			SetNotNilHomePath</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">HomePath</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			SetNotNilDescription</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Description</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			SetNotNilDepartmentID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">DepartmentId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Password</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			updateQuery</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> updateQuery</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">SetNotNilPassword</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">utils</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">BcryptEncrypt</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Password</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">RoleIds</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> tx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">User</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UpdateOneID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">uuidx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">ParseUUIDString</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">ClearRoles</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Exec</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">			if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> err</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">				return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> err</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			updateQuery</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> updateQuery</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">AddRoleIDs</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">RoleIds</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">...</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">PositionIds</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			err</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> :=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> tx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">User</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">UpdateOneID</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">uuidx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">ParseUUIDString</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Id</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">ClearPositions</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Exec</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">			if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> err</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">				return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> err</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">			updateQuery</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> updateQuery</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">AddPositionIDs</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">PositionIds</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">...</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> updateQuery</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Exec</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">l</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">ctx</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	})</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> err</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">errorhandler</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">DefaultEntError</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">err</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E06C75;">in</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> &amp;</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">core</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">BaseResp</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		Msg</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#24292E;--shiki-dark:#E06C75;">i18n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E06C75;">Success</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">nil</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Ent schema import tool <a href="https://github.com/ariga/entimport" target="_blank" rel="noopener noreferrer">ent import</a></p></blockquote><h3 id="common-problem" tabindex="-1"><a class="header-anchor" href="#common-problem"><span>Common problem</span></a></h3><blockquote><p>How to generate database comments?</p></blockquote><p>Just add <code>.Annotations(entsql.WithComments(true))</code> after the corresponding field</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">package</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> schema</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">import</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent/dialect/entsql</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent/schema</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent/schema/field</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">entgo.io/ent/schema/index</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">	&quot;</span><span style="color:#6F42C1;--shiki-dark:#98C379;">github.com/suyuan32/simple-admin-common/orm/ent/mixins</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">type</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> API</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> struct</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;">	ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Schema</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Fields</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;path&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;API path | API 路径&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Annotations</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">entsql</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">WithComments</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">true</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;description&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;API description | API 描述&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Annotations</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">entsql</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">WithComments</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">true</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;api_group&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;API group | API 分组&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Annotations</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">entsql</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">WithComments</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">true</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		field</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;method&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Default</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;POST&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Comment</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;HTTP method | HTTP 请求类型&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Annotations</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E06C75;">entsql</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">WithComments</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">true</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Mixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Mixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Mixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;">		mixins</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">BaseIDMixin</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{},</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Edges</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Edge</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> nil</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Indexes</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Index</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">ent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Index</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">		index</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Fields</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;path&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;method&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">			Unique</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">func</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">API</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Annotations</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">schema</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Annotation</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">	return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> []</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">schema</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Annotation</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#E5C07B;">		entsql</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;">Annotation</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">{</span><span style="color:#24292E;--shiki-dark:#E06C75;">Table</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;sys_apis&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Do not use <code>Nillable()</code> in the <code>Time</code> type field.</p></blockquote>`,61);function y(E,F){const n=l("BiliBili");return p(),r("div",null,[t,s("div",c,[d,B,o(n,{bvid:"BV17C4y157WL"})]),h])}const u=i(k,[["render",y],["__file","ent.html.vue"]]),v=JSON.parse('{"path":"/guide/feature/ORM/ent.html","title":"Ent","lang":"en-US","frontmatter":{"order":1,"title":"Ent","head":[["meta",{"name":"keywords","content":"ent, entgo, orm, golang orm, simple admin orm"}],["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://doc.ryansu.tech/zh/guide/feature/ORM/ent.html"}],["meta",{"property":"og:url","content":"https://doc.ryansu.tech/guide/feature/ORM/ent.html"}],["meta",{"property":"og:site_name","content":"Simple Admin"}],["meta",{"property":"og:title","content":"Ent"}],["meta",{"property":"og:description","content":"Ent Info Official Doc Official Example Tutorial Project helps you to imporve the skills Quick Start Install Ent Initialize code Run in rpc directory Defined schema In rpc/ent ，y..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-20T10:41:28.000Z"}],["meta",{"property":"article:author","content":"Ryan SU"}],["meta",{"property":"article:modified_time","content":"2024-05-20T10:41:28.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Ent\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-20T10:41:28.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Ryan SU\\",\\"url\\":\\"https://github.com/suyuan32\\"}]}"]],"description":"Ent Info Official Doc Official Example Tutorial Project helps you to imporve the skills Quick Start Install Ent Initialize code Run in rpc directory Defined schema In rpc/ent ，y..."},"headers":[{"level":2,"title":"Ent","slug":"ent","link":"#ent","children":[]},{"level":2,"title":"Quick Start","slug":"quick-start","link":"#quick-start","children":[{"level":3,"title":"Install Ent","slug":"install-ent","link":"#install-ent","children":[]},{"level":3,"title":"Initialize code","slug":"initialize-code","link":"#initialize-code","children":[]},{"level":3,"title":"Defined schema","slug":"defined-schema","link":"#defined-schema","children":[]},{"level":3,"title":"Mixin Introduction","slug":"mixin-introduction","link":"#mixin-introduction","children":[]},{"level":3,"title":"Initialize","slug":"initialize","link":"#initialize","children":[]},{"level":3,"title":"Ent Driver","slug":"ent-driver","link":"#ent-driver","children":[]},{"level":3,"title":"Usage in logic","slug":"usage-in-logic","link":"#usage-in-logic","children":[]},{"level":3,"title":"Query data","slug":"query-data","link":"#query-data","children":[]},{"level":3,"title":"Query raw sql","slug":"query-raw-sql","link":"#query-raw-sql","children":[]},{"level":3,"title":"Project add pagination template by default, you can copy this template to other project","slug":"project-add-pagination-template-by-default-you-can-copy-this-template-to-other-project","link":"#project-add-pagination-template-by-default-you-can-copy-this-template-to-other-project","children":[]},{"level":3,"title":"Common functions used in query","slug":"common-functions-used-in-query","link":"#common-functions-used-in-query","children":[]},{"level":3,"title":"Transaction","slug":"transaction","link":"#transaction","children":[]},{"level":3,"title":"Common problem","slug":"common-problem","link":"#common-problem","children":[]}]}],"git":{"createdTime":1671464359000,"updatedTime":1716201688000,"contributors":[{"name":"Ryan SU","email":"1137661202@qq.com","commits":11},{"name":"Ryan SU","email":"yuansu.china.work@gmail.com","commits":10},{"name":"Ryan Su","email":"yuansu.china.work@gmail.com","commits":4}]},"readingTime":{"minutes":4.8,"words":1440},"filePathRelative":"guide/feature/ORM/ent.md","localizedDate":"December 19, 2022","autoDesc":true,"excerpt":"<h2>Ent</h2>\\n<div class=\\"hint-container info\\">\\n<p class=\\"hint-container-title\\">Info</p>\\n<p><a href=\\"https://entgo.io/docs/getting-started\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Official Doc</a> <a href=\\"https://github.com/ent/ent/blob/master/examples/README.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Official Example</a>\\n<a href=\\"https://github.com/suyuan32/simple-admin-example-ent\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Tutorial Project</a> helps you to imporve the skills</p>\\n</div>"}');export{u as comp,v as data};
