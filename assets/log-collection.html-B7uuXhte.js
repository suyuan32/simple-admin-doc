import{_ as t}from"./kibana-B_dHhmbP.js";import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as c,c as o,a as e,f as n,b as s,e as r}from"./app-iw6MeW5y.js";const p={},u=e("blockquote",null,[e("p",null,"本项目主要使用 EFK 进行日志收集")],-1),d=e("ul",null,[e("li",null,"Elasticsearch"),e("li",null,"Filebeat"),e("li",null,"Kibana")],-1),m=e("h2",{id:"安装方法",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#安装方法"},[e("span",null,"安装方法")])],-1),k={href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html",target:"_blank",rel:"noopener noreferrer"},b={href:"https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-installation-configuration.html",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.elastic.co/guide/en/kibana/current/docker.html",target:"_blank",rel:"noopener noreferrer"},v=r(`<h2 id="测试环境快速安装方法" tabindex="-1"><a class="header-anchor" href="#测试环境快速安装方法"><span>测试环境快速安装方法</span></a></h2><h3 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>Docker</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># es</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> es01 <span class="token parameter variable">--net</span> elastic <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Xms1g -Xmx1g&quot;</span> <span class="token parameter variable">-m</span> 3g <span class="token parameter variable">-it</span> docker.elastic.co/elasticsearch/elasticsearch:8.4.3

<span class="token comment"># kibana</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> kib-01 <span class="token parameter variable">--net</span> elastic <span class="token parameter variable">-p</span> <span class="token number">5601</span>:5601 docker.elastic.co/kibana/kibana:8.4.3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filebeat" tabindex="-1"><a class="header-anchor" href="#filebeat"><span>Filebeat</span></a></h3><p>修改 filebeat-deploy.yaml， 位置 simple-admin-core/deploy/k8s/log-collection/filebeat/</p><blockquote><p>可以添加 log 来源位置，默认有 core</p></blockquote><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code> <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> /home/data/logs/core/<span class="token important">*/*.log</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置环境变量" tabindex="-1"><a class="header-anchor" href="#配置环境变量"><span>配置环境变量</span></a></h3><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code>          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ELASTICSEARCH_HOST   
              <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;192.168.50.216&quot;</span>  <span class="token comment"># ES的地址</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ELASTICSEARCH_PORT
              <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;9200&quot;</span>  <span class="token comment"># ES的端口</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ELASTICSEARCH_USERNAME
              <span class="token key atrule">value</span><span class="token punctuation">:</span> elastic <span class="token comment"># ES 的用户名</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ELASTICSEARCH_PASSWORD
              <span class="token key atrule">value</span><span class="token punctuation">:</span> UQ==CXXjw47bK_I13<span class="token important">*f1</span> <span class="token comment"># 密码</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ELASTICSEARCH_CA_FINGERPRINT
              <span class="token key atrule">value</span><span class="token punctuation">:</span> 8d6aed6bba745f2f0aaa46f628e3124c82ae6727c1f5e207e3d821ffeefb5e5e <span class="token comment"># 信任的CA指纹</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ELASTIC_CLOUD_ID 
              <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token comment"># 云 ID， 可选</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ELASTIC_CLOUD_AUTH 
              <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token comment"># 云 Token， 可选</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="然后使用脚本部署-filebeat" tabindex="-1"><a class="header-anchor" href="#然后使用脚本部署-filebeat"><span>然后使用脚本部署 filebeat</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 进入 simple-admin-core/deploy/k8s/log-collection/filebeat</span>
kubectl apply <span class="token parameter variable">-f</span> filebeat-deploy.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="效果展示" tabindex="-1"><a class="header-anchor" href="#效果展示"><span>效果展示</span></a></h3><figure><img src="`+t+'" alt="Pic" tabindex="0" loading="lazy"><figcaption>Pic</figcaption></figure>',13);function g(f,y){const a=i("ExternalLinkIcon");return c(),o("div",null,[u,d,m,e("ul",null,[e("li",null,[e("a",k,[n("Elasticsearch"),s(a)])]),e("li",null,[e("a",b,[n("Filebeat"),s(a)])]),e("li",null,[e("a",h,[n("Kibana"),s(a)])])]),v])}const w=l(p,[["render",g],["__file","log-collection.html.vue"]]),x=JSON.parse('{"path":"/zh/guide/feature/log-collection.html","title":"日志收集","lang":"zh-CN","frontmatter":{"order":8,"title":"日志收集","description":"本项目主要使用 EFK 进行日志收集 Elasticsearch Filebeat Kibana 安装方法 Elasticsearch Filebeat Kibana 测试环境快速安装方法 Docker Filebeat 修改 filebeat-deploy.yaml， 位置 simple-admin-core/deploy/k8s/log-colle...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://doc.ryansu.tech/guide/feature/log-collection.html"}],["meta",{"property":"og:url","content":"https://doc.ryansu.tech/zh/guide/feature/log-collection.html"}],["meta",{"property":"og:site_name","content":"Simple Admin"}],["meta",{"property":"og:title","content":"日志收集"}],["meta",{"property":"og:description","content":"本项目主要使用 EFK 进行日志收集 Elasticsearch Filebeat Kibana 安装方法 Elasticsearch Filebeat Kibana 测试环境快速安装方法 Docker Filebeat 修改 filebeat-deploy.yaml， 位置 simple-admin-core/deploy/k8s/log-colle..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://doc.ryansu.tech/assets/kibana.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-01-17T00:19:29.000Z"}],["meta",{"property":"article:author","content":"Ryan SU"}],["meta",{"property":"article:modified_time","content":"2024-01-17T00:19:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"日志收集\\",\\"image\\":[\\"https://doc.ryansu.tech/assets/kibana.png\\"],\\"dateModified\\":\\"2024-01-17T00:19:29.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Ryan SU\\",\\"url\\":\\"https://github.com/suyuan32\\"}]}"]]},"headers":[{"level":2,"title":"安装方法","slug":"安装方法","link":"#安装方法","children":[]},{"level":2,"title":"测试环境快速安装方法","slug":"测试环境快速安装方法","link":"#测试环境快速安装方法","children":[{"level":3,"title":"Docker","slug":"docker","link":"#docker","children":[]},{"level":3,"title":"Filebeat","slug":"filebeat","link":"#filebeat","children":[]},{"level":3,"title":"配置环境变量","slug":"配置环境变量","link":"#配置环境变量","children":[]},{"level":3,"title":"然后使用脚本部署 filebeat","slug":"然后使用脚本部署-filebeat","link":"#然后使用脚本部署-filebeat","children":[]},{"level":3,"title":"效果展示","slug":"效果展示","link":"#效果展示","children":[]}]}],"git":{"createdTime":1671464359000,"updatedTime":1705450769000,"contributors":[{"name":"Ryan SU","email":"1137661202@qq.com","commits":3},{"name":"Ryan Su","email":"yuansu.china.work@gmail.com","commits":1}]},"readingTime":{"minutes":0.7,"words":209},"filePathRelative":"zh/guide/feature/log-collection.md","localizedDate":"2022年12月19日","autoDesc":true,"excerpt":"<blockquote>\\n<p>本项目主要使用 EFK 进行日志收集</p>\\n</blockquote>\\n<ul>\\n<li>Elasticsearch</li>\\n<li>Filebeat</li>\\n<li>Kibana</li>\\n</ul>\\n<h2>安装方法</h2>\\n<ul>\\n<li><a href=\\"https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Elasticsearch</a></li>\\n<li><a href=\\"https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-installation-configuration.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Filebeat</a></li>\\n<li><a href=\\"https://www.elastic.co/guide/en/kibana/current/docker.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Kibana</a></li>\\n</ul>"}');export{w as comp,x as data};
